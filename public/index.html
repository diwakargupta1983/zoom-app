<!doctype html>

<!-- ASSIGN OUR ANGULAR MODULE -->
<html ng-app="customerDetails">
<head>
    <!-- META -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Optimize mobile viewport -->

    <title>Node/Angular Todo App</title>

    <!-- SCROLLS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous"><!-- load bootstrap -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css" integrity="sha384-aUGj/X2zp5rLCbBxumKTCw2Z50WgIr1vs/PFN4praOTvYXWlVyh2UtNUU0KAUhAX" crossorigin="anonymous">

    <!-- SPELLS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script><!-- load jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular.min.js"></script><!-- load angular -->
    <script src="js/controllers.js"></script>
    <script src="js/directives.js"></script>
    <script src="js/services.js"></script>
    <script src="js/filters.js"></script>
	<script src="js/ui-bootstrap-tpls-0.14.3.min.js"></script>

</head>
<!-- SET THE CONTROLLER AND GET ALL TODOS -->
<body ng-controller="mainController">
::::::::{{formData}}
    <div class="container">

        <!-- HEADER AND TODO COUNT -->
        <div class="text-center marginB20">
			<h2>Customer Details</h2>
            <h3>Total Records <span class="label label-info">{{ customer_properties.length }}</span></h3>
        </div>
		
		<div class="row marginB20">
			<div class="col-md-12">
				<form class="form-inline">
				  <div class="form-group">
					<label for="searchRecords">Search records</label>
					<input type="text" class="form-control" id="searchRecords" ng-model="query" />
				  </div>
				</form>
			</div>
		</div>
		
		<!-- FORM TO CREATE TODOS -->
        <div id="todo-form" class="row marginB20">
            <div class="col-sm-6 col-md-12 text-center">
                <form class="bg-success padding10">
					<legend class="text-left">Enter a new record</legend>
					<div class="row">
						<div class="col-md-2">
							<input type="text" class="form-control" id="phoneNo" placeholder="Phone No." ng-model="formData.phone" />
						</div>
						<div class="col-md-2">
							<input type="text" class="form-control" id="firstName" placeholder="First Name" ng-model="formData.first_name" />
						</div>
						<div class="col-md-2">
							<input type="text" class="form-control" id="lastName" placeholder="Last Name" ng-model="formData.last_name" />
						</div>
						<div class="col-md-2">
							<zm-datepicker-dob></zm-datepicker-dob>
						</div>
						<div class="col-md-2">
							<input type="text" class="form-control" id="address" placeholder="Address" ng-model="formData.address" />
						</div>
						<div class="col-md-2">
							<button type="submit" class="btn btn-primary" ng-click="createTodo(); Submit()">Add</button>
						</div>
					</div>
					<div class="row">
						<div class="col-md-12">
							<div class="form-group">
								<label>Upload Image</label>
								<input type="file" id="customerImage" file-model="formData.file" />
							</div>
						</div>
					</div>
                </form>
            </div>
        </div>
		
		<!-- TODO LIST -->
        <div id="todo-list" class="row">
            <div class="col-sm-12 col-md-12">
				
				<table class="table">
					<thead>
						<tr>
							<th>Phone No.</th>
							<th>Name</th>
							<th>Date of Birth</th>
							<th>Address</th>
							<th>Photo ID</th>
							<th>Actions</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="customer_property in filteredItems  = (customer_properties | filter:query)">
							<td>{{ customer_property.phone }}</td>
							<td>{{ customer_property.first_name }} {{ customer_property.last_name }}</td>
							<td>{{ customer_property.dob | DDMMMYYYY }}</td>
							<td>{{ customer_property.address }}</td>
							<td><a href="/uploads/ZBR-{{ customer_property.photoId }}.pdf" title="">ZBR-{{ customer_property.photoId }}</a></td>
							<td><a href="javascript:void(0);" title="Delete Record" ng-click="deleteTodo(customer_property._id)">Delete</a></td>
						</tr>
						<tr ng-if="filteredItems.length === 0" class="bg-danger text-danger">
							<td colspan="6" class="text-center">No Results Found</td>
						</tr>
					</tbody>
				</table>

            </div>
        </div>
    </div>

</body>
</html>